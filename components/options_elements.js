/* Developed by Ben Cheshire */
"use strict";(()=>{const e=chrome.runtime?.id,t=chrome.runtime.getManifest().name,n=`https://chrome.google.com/webstore/detail/${e}/support`,o=e=>document.getElementById(e),s=e=>document.getElementsByClassName(e),i=e=>document.getElementsByTagName(e),r=e=>document.querySelector(e),a=e=>c(o(e)),c=e=>e.style;var l;function h(e,t){if(e=e.startsWith("update")?"../bFramework/"+e:"../components/"+e,document.querySelector(`[src='${e}']`))return window.dispatchEvent(new CustomEvent(document.querySelector(`[src='${e}']`).src)),void t(e,"error");var n=!1,o=document.createElement("script");function s(){n||(n=!0,window.dispatchEvent(new CustomEvent(o.src)),t(e,"ok"))}o.onload=s,o.onreadystatechange=()=>{n||"complete"===o.readyState&&s()},o.onerror=()=>{n||(n=!0,t(e,"error"))},o.src=e,document.body.appendChild(o)}document.addEventListener("DOMContentLoaded",(function(d){for(let e of s("exsupport"))e.href=n;o("footer").innerHTML=`<table><th>${t}<br><span style="font-size:0.8rem">v${chrome.runtime.getManifest().version_name}</span></th><th><a target="_blank" href="https://chrome.google.com/webstore/detail/${e}/reviews">Review this extension</a></th><th><a target="_blank" href="${n}">Support</a></th><th><div style="display: -webkit-inline-box;">Developed by: <a target="_blank" href="https://benchesh.com/">Ben Cheshire</a><br>Logo designed by: <a target="_blank" href="http://seanrugg.com/">Sean Rugg</a></h3></div></div></th></table>`,o("clone").innerHTML=s("hcontainer_super")[0].innerHTML,window.addEventListener("hashchange",(function(){chrome.runtime.sendMessage({options:location.hash}),(()=>{for(var e of(l=location.hash.substring(1),document.title=t+" - "+l.replace(/_/g," "),i("h1")[0].innerText=document.title,l=l.split("_")[0].toLowerCase(),s("header")[0].getElementsByTagName("span"))){const t=e.innerText.replace(/ /g,"_");t.split("_")[0].toLowerCase()!==l?e.innerHTML=`<a href="#${t}">${e.innerText}</a>`:e.innerHTML=e.innerText}})(),a("content").opacity=0,a("content").transform="scale(0.9)",setTimeout((function(){var n,d,p;window.scrollTo(0,0),((t,n="",s="")=>{const i=e+"_Styles",a=t.replace(/\./g,"-").replace(/ /g,"_")+s+i,l=""!==n?t+`{${n}}`:n;if(o(a))o(a).innerHTML!==l&&(o(a).innerHTML=l);else if(o(i))o(i).innerHTML+=`<style id='${a}'>${l}</style>`;else{const e=document.createElement("div");e.id=i,c(e).display="none",e.innerHTML=`<style id='${a}'>${l}</style>`,(r("head")||r("*")).appendChild(e)}})("html","transition:all 0.2s ease;opacity:1"),"update"!==l?(n=l+".html",d=function(e){for(var n of(o("content").innerHTML=e.replace(/{EXTITLE}/g,t),i("img")))n.onload=function(){"profile"===this.id&&(c(this.parentNode).opacity=1,c(this).transform="scale(1)")};"options"===l&&h(l+".js",()=>{});for(let e of s("help"))e.addEventListener("mouseover",(function(){const e=this.getElementsByTagName("div")[0];e.parentNode.getBoundingClientRect().left+e.offsetWidth-window.innerWidth>-25&&(c(e).left=window.innerWidth-(e.parentNode.getBoundingClientRect().left+e.offsetWidth)-25+"px")}),!1),e.addEventListener("mouseout",(function(){c(this.getElementsByTagName("div")[0]).left=0}),!1);a("content").opacity=1,a("content").transform="scale(1)"},(p=new XMLHttpRequest).open("GET","../components/"+n,!0),p.onreadystatechange=()=>{4===p.readyState&&(200===p.status?d(p.responseText):(location.hash="Options",d("")))},p.send()):h(l+".js",()=>{a("content").opacity=1,a("content").transform="scale(1)"})}),250)})),""===location.hash?location.hash="Options":window.dispatchEvent(new Event("hashchange"))})),chrome.runtime.onMessage.addListener((e,t,n)=>{null!=e.options&&(e.options.startsWith("#")?e.options!==location.hash&&(n("success"),window.close()):o("allOptions")?("setDefaults"===e.options?window.dispatchEvent(new CustomEvent("savedMessage")):e.options.startsWith("temp_whitelist_entry:")&&(e=>{(e=>null!=e&&""!==e)(e)&&(a("whitelistInput").transform="scale(0,1)",a("addToWhitelist").opacity=0,setTimeout(()=>{o("whitelistInput").value=e,window.dispatchEvent(new CustomEvent("whitelistInputLengthCheck")),a("whitelistInput").removeProperty("transform"),a("addToWhitelist").removeProperty("opacity")},300))})(((e,t,n=!0)=>{n||(t=t.toUpperCase());const o=n?e.substring(e.indexOf(t)):e.substring(e.toUpperCase().indexOf(t));return o.length!==e.length||(n?o.startsWith(t):o.toUpperCase().startsWith(t))?o.substring(t.length):e})(e.options,"temp_whitelist_entry:")),n("success")):location.hash="Options",n("fail"))})})();